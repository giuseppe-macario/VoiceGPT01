name: Build iOS 26 (Xcode 26)

on:
  # solo esecuzione manuale dal tab Actions
  workflow_dispatch:
    inputs:
      configuration:
        description: 'Configurazione Xcode (Debug o Release)'
        required: true
        default: 'Release'

jobs:
  build:
    runs-on: macos-26   # oppure macos-26-xlarge se ti serve pi√π potenza

    steps:
      - name: Checkout sorgente
        uses: actions/checkout@v4

      # Opzionale: mostra versione di Xcode / SDK installati
      - name: Mostra versione Xcode
        run: |
          xcodebuild -version
          xcodebuild -showsdks
          
      - name: Build iOS (Simulator, no signing)
        run: |
          xcodebuild \
            -project VoiceGPT01.xcodeproj \
            -scheme VoiceGPT01 \
            -sdk iphonesimulator \
            -destination 'generic/platform=iOS Simulator' \
            -configuration "${{ github.event.inputs.configuration }}" \
            build
